# 画面設計書

## 1. 画面構成概要

### グローバルレイアウト
```mermaid
graph TD
    A[ヘッダー] --> B[ナビゲーションメニュー]
    C[メインコンテンツ] --> D[各機能画面]
    E[フッター] --> F[共通リンク/著作権表示]
```

### 画面一覧
1. ログイン画面
2. ダッシュボード
3. プロフィール画面
4. 設定画面
5. 管理画面
6. 人口推移グラフ画面

## 2. 画面遷移図

```mermaid
graph LR
    A[ログイン画面] --> B[ダッシュボード]
    B --> C[プロフィール画面]
    B --> D[設定画面]
    B --> E[管理画面]
    B --> F[人口推移グラフ画面]
    C --> B
    D --> B
    E --> B
    F --> B
```

## 3. 各画面詳細

### 3.1 ログイン画面
#### レイアウト
- ロゴ
- メールアドレス入力フィールド
- パスワード入力フィールド
- ログインボタン
- パスワードリセットリンク

#### 機能要件
- バリデーション
  - メールアドレス形式チェック
  - パスワード最小文字数チェック
- エラーメッセージ表示
- ログイン状態の保持
- 多要素認証対応

### 3.2 ダッシュボード
#### レイアウト
- ヘッダー
  - ユーザー情報
  - 通知アイコン
  - ログアウトボタン
- サイドバー
  - メニュー項目
  - ステータス表示
- メインコンテンツ
  - データ可視化セクション
  - アクティビティログ
  - クイックアクション

#### 機能要件
- リアルタイムデータ更新
- レスポンシブ対応
- ダークモード対応
- カスタマイズ可能なウィジェット

### 3.3 プロフィール画面
#### レイアウト
- プロフィール画像
- 基本情報編集フォーム
- アカウント設定
- 活動履歴

#### 機能要件
- 画像アップロード
- 情報更新のバリデーション
- パスワード変更機能
- アクティビティログ表示

### 3.4 設定画面
#### レイアウト
- カテゴリータブ
  - 一般設定
  - 通知設定
  - セキュリティ設定
  - 表示設定
- 設定項目フォーム

#### 機能要件
- 設定の即時反映
- 設定のエクスポート/インポート
- デフォルト値へのリセット
- 変更履歴の管理

### 3.5 管理画面
#### レイアウト
- ユーザー管理セクション
- システム設定セクション
- ログ管理セクション
- バックアップ/リストアセクション

#### 機能要件
- ユーザーの追加/編集/削除
- 権限管理
- システム状態モニタリング
- バックアップスケジュール設定

### 3.6 人口推移グラフ画面
#### レイアウト
- ヘッダー
  - タイトル「都道府県別人口推移グラフ」
  - 取得時間表示（ミリ秒単位）
  - キャッシュ状態表示（「キャッシュ」または「API」）
  - キャッシュクリアボタン

- 都道府県選択セクション
  - セクションタイトル「都道府県を選択」
  - 地域選択UI
    - 8つの地域ボタン（北海道、東北、関東、中部、近畿、中国、四国、九州）
    - 各地域の選択状態表示
  - 都道府県チェックボックスリスト
    - 47都道府県のチェックボックス
    - 全選択/全解除ボタン

- グラフ表示セクション
  - セクションタイトル「人口推移グラフ」
  - Rechartsによる折れ線グラフ
    - X軸：年
    - Y軸：人口数
    - ツールチップ表示
  - 未選択時のメッセージ表示
  - ローディング時のスケルトン表示
  - エラー時のフォールバックUI

#### 機能要件
- データ取得
  - 都道府県一覧の動的取得
  - 選択された都道府県の人口データ取得
  - キャッシュ機能による高速化
  - エラーハンドリング

- 選択機能
  - 個別都道府県の選択/解除
  - 地域単位での一括選択/解除
  - 全都道府県の一括選択/解除
  - 選択状態の視覚的フィードバック

- グラフ表示
  - 複数都道府県の同時表示
  - 都道府県ごとの色分け
  - ホバー時のデータ詳細表示
  - スムーズなアニメーション

- パフォーマンス
  - APIレスポンスのキャッシュ
  - 取得時間の表示
  - キャッシュクリア機能
  - 効率的なデータ更新

#### 非機能要件
- レスポンシブ対応
  - モバイル: ~767px
  - タブレット: 768px~1023px
  - デスクトップ: 1024px~

- アクセシビリティ
  - キーボード操作対応
  - スクリーンリーダー対応
  - WAI-ARIA対応
  - 十分なコントラスト比

- パフォーマンス
  - 初期表示: 1.5秒以内
  - データ更新: 1秒以内
  - メモリ使用量の最適化
  - バンドルサイズの最適化

## 4. コンポーネント設計

### 4.1 共通コンポーネント
#### ボタン
- プライマリーボタン
- セカンダリーボタン
- テキストボタン
- アイコンボタン

#### フォーム要素
- テキスト入力
- セレクトボックス
- チェックボックス
- ラジオボタン
- データピッカー

#### カード
- 情報カード
- アクションカード
- 統計カード

#### モーダル
- 確認モーダル
- フォームモーダル
- 画像プレビューモーダル

### 4.2 専用コンポーネント
#### ダッシュボード
- データチャート
- ステータスインジケーター
- アクティビティフィード

#### プロフィール
- プロフィール画像アップローダー
- 情報編集フォーム
- アクティビティタイムライン

#### 管理画面
- ユーザーテーブル
- 権限マトリックス
- システムステータスモニター

#### 人口推移グラフ画面
- 地域選択ボタングループ
  - 地域名表示
  - 選択状態インジケーター
  - ホバーエフェクト
- 都道府県チェックボックスリスト
  - チェックボックスグループ
  - 全選択/解除ボタン
  - 選択状態表示
- 人口推移折れ線グラフ
  - グラフ本体
  - 凡例表示
  - ツールチップ
  - ズームコントロール
- キャッシュ状態インジケーター
  - 取得時間表示
  - キャッシュ状態表示
  - クリアボタン
- パフォーマンスモニター
  - メモリ使用量
  - レンダリング時間
  - API応答時間

## 5. レスポンシブデザイン

### ブレークポイント
- モバイル: ~767px
- タブレット: 768px~1023px
- デスクトップ: 1024px~

### レイアウト変更点
#### モバイル
- サイドバーをハンバーガーメニューに変更
- グリッドレイアウトを1カラムに変更
- フォントサイズの最適化
- タッチ操作の最適化

#### タブレット
- 2カラムレイアウトの採用
- サイドバーの選択的表示
- 要素サイズの最適化

#### デスクトップ
- フルレイアウトの表示
- ホバーエフェクトの追加
- ショートカットキーの有効化

## 6. アクセシビリティ対応

### WAI-ARIA
- ランドマークロール
- アリアラベル
- フォーカス管理
- キーボード操作

### カラーコントラスト
- WCAG 2.1 AAレベル準拠
- ダークモード対応
- ハイコントラストモード対応

### その他
- スクリーンリーダー対応
- 代替テキスト
- フォーカス可視化
- 文字サイズ変更対応

## 7. アニメーション/トランジション

### 種類
- ページ遷移
- モーダル表示/非表示
- 要素のフェードイン/アウト
- ローディングアニメーション

### 実装方針
- CSS Transitions優先
- 必要最小限のアニメーション
- パフォーマンスへの配慮
- アニメーション無効化オプション

## 8. エラーハンドリング

### エラー表示
- インラインエラー
- エラーメッセージ
- トースト通知
- エラーページ

### 実装方針
- わかりやすいエラーメッセージ
- リカバリーアクションの提示
- エラーログの記録
- グレースフルデグラデーション

## 9. パフォーマンス最適化

### 実装方針
- コンポーネントの遅延ローディング
- 画像の最適化
- キャッシュ戦略
- バンドルサイズの最適化

### モニタリング
- Core Web Vitals
- ページロード時間
- インタラクション応答時間
- メモリ使用量 